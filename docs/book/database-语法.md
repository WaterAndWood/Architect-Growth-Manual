1.1	存储过程(特定功能的 SQL 语句集) 
一组为了完成特定功能的 SQL 语句集，存储在数据库中，经过第一次编译后再次调用不需要再次编译，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。存储过程是数据库中的一个重要对象。 
存储过程优化思路： 
1.	尽量利用一些 sql 语句来替代一些小循环，例如聚合函数，求平均函数等。 
2.	中间结果存放于临时表，加索引。 
3.	少使用游标。sql 是个集合语言，对于集合运算具有较高性能。而 cursors 是过程运算。比如对一个 100 万行的数据进行查询。游标需要读表 100 万次，而不使用游标则只需要少量几次读取。 
4.	事务越短越好。sqlserver 支持并发操作。如果事务过多过长，或者隔离级别过高，都会造成并发操作的阻塞，死锁。导致查询极慢，cpu 占用率极地。 
5.	使用 try-catch 处理错误异常。 
6.	查找语句尽量不要放在循环内。 
1.2	触发器(一段能自动执行的程序) 
 触发器是一段能自动执行的程序，是一种特殊的存储过程，触发器和普通的存储过程的区别是：触发器是当对某一个表进行操作时触发。诸如：update、insert、delete 这些操作的时候，系统会自动调用执行该表上对应的触发器。SQL Server 2005 中触发器可以分为两类：DML 触发器和 DDL 触发器，其中 DDL 触发器它们会影响多种数据定义语言语句而激发，这些语句有 create、 alter、drop 语句。 

1.1	分区分表 
分库分表有垂直切分和水平切分两种。 
垂直切分(按照功能模块) 
	将表按照功能模块、关系密切程度划分出来，部署到不同的库上。例如，我们会建立定义数据库 workDB、商品数据库 payDB、用户数据库 userDB、日志数据库 logDB 等，分别用于存储项目数据定义表、商品定义表、用户数据表、日志数据表等。 
<div align=center>

![水平切分(按照规则划分存储) ](..\images\1589107780269.png)

</div>

	当一个表中的数据量过大时，我们可以把该表的数据按照某种规则，例如 userID 散列，进行划分，然后存储到多个结构相同的表，和不同的库上。 

<div align=center>

![1589107824741.png](..\images\1589107824741.png)

</div>